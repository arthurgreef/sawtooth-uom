FROM python:3.5-slim
LABEL maintainers="Frank V. Castellucci, Arthur Greef"

RUN python3 -m ensurepip && \
    pip3 install --trusted-host pypi.python.org --upgrade pip setuptools && \
    rm -r /root/.cache

WORKDIR /project

COPY apps/shared shared
COPY apps/protobuf protobuf
COPY apps/hashblock_rest hashblock_rest

RUN pip3 install --trusted-host pypi.python.org -r hashblock_rest/requirements.txt

CMD gunicorn -b 0.0.0.0:8000 --access-logfile - "hashblock_rest.app:application"
